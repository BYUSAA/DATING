<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pen Pal - Metadatez</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div class="theme-toggle">
        <button id="theme-switcher"><i class="fas fa-moon"></i></button>
    </div>
    
    <header class="futuristic-header">
        <div class="logo-container">
            <div class="logo-particle" id="particle-1"></div>
            <div class="logo-particle" id="particle-2"></div>
            <div class="logo-particle" id="particle-3"></div>
            <h1>METADATEZ</h1>
        </div>
        <nav>
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="#" id="profile-link">Profile</a></li>
                <li><a href="#" id="logout-link">Logout</a></li>
            </ul>
        </nav>
    </header>

    <main class="category-container penpal-container">
        <div class="category-header">
            <div class="category-icon large">
                <i class="fas fa-envelope"></i>
            </div>
            <h2>Pen Pal</h2>
            <p>Connect with inmates and others through meaningful correspondence</p>
        </div>
        
        <div class="category-description">
            <h3>About Our Pen Pal Program</h3>
            <p>The Metadatez Pen Pal program offers a unique opportunity to connect with inmates and others seeking meaningful correspondence. Our platform provides a safe and secure way to exchange letters, photos, and support.</p>
            
            <div class="penpal-features">
                <div class="feature">
                    <i class="fas fa-shield-alt"></i>
                    <h4>Secure Communication</h4>
                    <p>All communications are monitored to ensure safety and compliance with facility regulations.</p>
                </div>
                <div class="feature">
                    <i class="fas fa-camera"></i>
                    <h4>Photo Sharing</h4>
                    <p>Send printed photos to inmates through our secure system (where permitted by facility rules).</p>
                </div>
                <div class="feature">
                    <i class="fas fa-credit-card"></i>
                    <h4>Credit System</h4>
                    <p>Use our credit system to fund inmate accounts for stamps and other approved items.</p>
                </div>
            </div>
            
            <div class="penpal-guidelines">
                <h4>Guidelines for Pen Pal Correspondence:</h4>
                <ul>
                    <li>All communications are subject to monitoring by facility staff</li>
                    <li>Do not share personal contact information until approved</li>
                    <li>Be respectful in all communications</li>
                    <li>Photos must comply with facility guidelines (no nudity, drugs, weapons, etc.)</li>
                    <li>Do not discuss criminal activity or plans for the future</li>
                </ul>
            </div>
        </div>
        
        <div class="penpal-members">
            <h3>Featured Pen Pals</h3>
            
            <div class="penpal-filters">
                <div class="filter-group">
                    <label for="penpal-type">Type</label>
                    <select id="penpal-type">
                        <option value="all">All</option>
                        <option value="inmates">Inmates</option>
                        <option value="military">Military</option>
                        <option value="seniors">Seniors</option>
                        <option value="students">Students</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="penpal-location">Location</label>
                    <select id="penpal-location">
                        <option value="all">Anywhere</option>
                        <option value="us">United States</option>
                        <option value="europe">Europe</option>
                        <option value="asia">Asia</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="penpal-interests">Interests</label>
                    <select id="penpal-interests">
                        <option value="all">Any</option>
                        <option value="reading">Reading</option>
                        <option value="art">Art</option>
                        <option value="sports">Sports</option>
                        <option value="music">Music</option>
                    </select>
                </div>
                <button class="filter-button vanish">Apply Filters</button>
            </div>
            
            <div class="members-grid" id="penpal-grid">
                <!-- Pen pals will be loaded here -->
                <div class="loading-members">
                    <div class="loading-spinner"></div>
                    <p>Finding pen pals...</p>
                </div>
            </div>
        </div>
        
        <div class="penpal-credit-system">
            <h3>Credit System</h3>
            <p>Metadatez uses a credit system to facilitate communication with inmates. Credits can be used to:</p>
            
            <div class="credit-uses">
                <div class="credit-use">
                    <div class="credit-icon">
                        <i class="fas fa-envelope-open-text"></i>
                    </div>
                    <p>Send messages (25 credits per message)</p>
                </div>
                <div class="credit-use">
                    <div class="credit-icon">
                        <i class="fas fa-camera"></i>
                    </div>
                    <p>Send photos (50 credits per photo)</p>
                </div>
                <div class="credit-use">
                    <div class="credit-icon">
                        <i class="fas fa-gift"></i>
                    </div>
                    <p>Fund inmate accounts for stamps and supplies</p>
                </div>
            </div>
            
            <div class="credit-packages">
                <h4>Credit Packages:</h4>
                <div class="packages-grid">
                    <div class="credit-package">
                        <h5>100 Credits</h5>
                        <div class="package-price">$10.00</div>
                        <button class="package-button vanish">Purchase</button>
                    </div>
                    <div class="credit-package">
                        <h5>250 Credits</h5>
                        <div class="package-price">$22.50 <span class="discount">($25.00 value)</span></div>
                        <button class="package-button vanish">Purchase</button>
                    </div>
                    <div class="credit-package">
                        <h5>500 Credits</h5>
                        <div class="package-price">$40.00 <span class="discount">($50.00 value)</span></div>
                        <button class="package-button vanish">Purchase</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="other-categories">
            <h3>Not what you're looking for? Try these categories:</h3>
            <div class="category-links">
                <a href="dating.html" class="category-link">
                    <i class="fas fa-heart"></i>
                    <span>Dating</span>
                </a>
                <a href="friendship.html" class="category-link">
                    <i class="fas fa-hands-helping"></i>
                    <span>Friendship</span>
                </a>
                <a href="international.html" class="category-link">
                    <i class="fas fa-globe"></i>
                    <span>International</span>
                </a>
            </div>
        </div>
    </main>

    <script src="../script.js"></script>
    <script src="../auth.js"></script>
    <script>
        // Check authentication
        document.addEventListener('DOMContentLoaded', function() {
            const user = auth.getCurrentUser();
            
            if (!user) {
                window.location.href = '../login.html';
                return;
            }
            
            // Set up profile link
            document.getElementById('profile-link').addEventListener('click', function(e) {
                e.preventDefault();
                window.location.href = '../profile.html';
            });
            
            // Set up logout link
            document.getElementById('logout-link').addEventListener('click', function(e) {
                e.preventDefault();
                auth.logout();
                window.location.href = '../index.html';
            });
            
            // Load fake pen pals
            setTimeout(() => {
                loadPenPals();
            }, 1500);
            
            // Set up credit package buttons
            document.querySelectorAll('.package-button').forEach(button => {
                button.addEventListener('click', function() {
                    const credits = parseInt(this.closest('.credit-package').querySelector('h5').textContent);
                    alert(`Purchased ${credits} credits!`);
                });
            });
        });
        
        // Load fake pen pals
        function loadPenPals() {
            const penpalGrid = document.getElementById('penpal-grid');
            penpalGrid.innerHTML = '';
            
            const fakePenPals = [
                { 
                    id: 1, 
                    name: 'James W.', 
                    age: 32, 
                    location: 'San Quentin, CA', 
                    type: 'inmate',
                    photo: 'https://randomuser.me/api/portraits/men/85.jpg',
                    interests: ['Reading', 'Writing'],
                    bio: 'Looking for meaningful correspondence and friendship during my rehabilitation.'
                },
                { 
                    id: 2, 
                    name: 'Maria G.', 
                    age: 28, 
                    location: 'Overseas Deployment', 
                    type: 'military',
                    photo: 'https://randomuser.me/api/portraits/women/65.jpg',
                    interests: ['Music', 'Travel'],
                    bio: 'Military service member looking to connect with people back home.'
                },
                { 
                    id: 3, 
                    name: 'Robert T.', 
                    age: 72, 
                    location: 'Retirement Home, FL', 
                    type: 'senior',
                    photo: 'https://randomuser.me/api/portraits/men/22.jpg',
                    interests: ['History', 'Chess'],
                    bio: 'Retired professor looking for stimulating conversation.'
                },
                { 
                    id: 4, 
                    name: 'Aisha K.', 
                    age: 21, 
                    location: 'University of Tokyo', 
                    type: 'student',
                    photo: 'https://randomuser.me/api/portraits/women/33.jpg',
                    interests: ['Language Exchange', 'Anime'],
                    bio: 'International student looking to practice English and make friends.'
                },
                { 
                    id: 5, 
                    name: 'Carlos M.', 
                    age: 35, 
                    location: 'Rikers Island, NY', 
                    type: 'inmate',
                    photo: 'https://randomuser.me/api/portraits/men/45.jpg',
                    interests: ['Art', 'Poetry'],
                    bio: 'Artist seeking pen pals to share my work and thoughts with.'
                },
                { 
                    id: 6, 
                    name: 'Emily R.', 
                    age: 19, 
                    location: 'Gap Year - Southeast Asia', 
                    type: 'student',
                    photo: 'https://randomuser.me/api/portraits/women/55.jpg',
                    interests: ['Travel', 'Photography'],
                    bio: 'Traveling the world and documenting my journey through letters.'
                }
            ];
            
            fakePenPals.forEach(penpal => {
                const penpalCard = document.createElement('div');
                penpalCard.className = 'member-card penpal-card';
                penpalCard.innerHTML = `
                    <div class="member-photo">
                        <img src="${penpal.photo}" alt="${penpal.name}">
                        <div class="penpal-type">${penpal.type.charAt(0).toUpperCase() + penpal.type.slice(1)}</div>
                    </div>
                    <div class="member-info">
                        <h4>${penpal.name}</h4>
                        <p class="member-age-location">${penpal.age} • ${penpal.location}</p>
                        <div class="member-bio">${penpal.bio}</div>
                        <div class="member-interests">
                            ${penpal.interests.map(int => `<span class="interest-tag">${int}</span>`).join('')}
                        </div>
                    </div>
                    <div class="member-actions">
                        <button class="member-action vanish" data-penpal-id="${penpal.id}">
                            <i class="fas fa-envelope"></i> Write
                        </button>
                        <button class="member-action secondary vanish" data-penpal-id="${penpal.id}">
                            <i class="fas fa-gift"></i> Send Credits
                        </button>
                    </div>
                `;
                
                penpalGrid.appendChild(penpalCard);
            });
            
            // Add event listeners to pen pal buttons
            document.querySelectorAll('.member-action').forEach(button => {
                button.addEventListener('click', function() {
                    const penpalId = this.getAttribute('data-penpal-id');
                    const penpal = fakePenPals.find(p => p.id == penpalId);
                    
                    if (this.classList.contains('secondary')) {
                        // Send credits button
                        alert(`Sending credits to ${penpal.name}...`);
                    } else {
                        // Write button
                        alert(`Starting a letter to ${penpal.name}...`);
                    }
                });
            });
        }
    </script>
</body>
</html>